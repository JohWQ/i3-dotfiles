## i3 CONFIG FILE (v4)
## https://i3wm.org/docs/userguide.html

## ---------------------- i3WM SETTINGS ---------------------- ##
include $HOME/.config/i3/modes.conf
include $HOME/.config/i3/window-rules.conf

bindsym $mod+Shift+c reload
bindsym $mod+Shift+r restart
# Hack to reload only the config and i3bar.
bindsym $mod+Shift+ctrl+c exec --no-startup-id pkill i3bar && (i3bar -b bar-0 & i3bar -b bar-1 &)


## ---------------------- COLORS & APPEARANCE ---------------------- ##
# type:                 layout  layout  title   line    border
client.focused          #0377ce #0377ce #ffffff #0377ce #0377ce
client.focused_inactive #313f4e #313f4e #e6e6e6 #313f4e #313f4e
client.unfocused        #252525 #252525 #d1d1d1 #252525 #252525
client.urgent           #87ceeb #87ceeb #104b63 #87ceeb #87ceeb
client.placeholder      #000000 #000000 #ffffff #000000 #000000
client.background       #ffffff

font pango: Liberation Mono 9

# DESKTOP WALLPAPER. REPLACE WITH THE PATH OF YOUR IMAGE:
#set $desktopwallpaper ~/Pictures/Emperor_penguins.jpeg

# Window style
title_align center
default_floating_border normal
set $configborderstyle pixel 3
default_border $configborderstyle

# Border style scripts
bindsym $mod+b exec --no-startup-id ~/.config/i3/scripts/toggle-top-bar.sh
bindsym $mod+Shift+b exec --no-startup-id ~/.config/i3/scripts/toggle-gaps.sh
bindsym $mod+ctrl+b exec --no-startup-id ~/.config/i3/scripts/cycle-border-style.sh

gaps inner 8
smart_gaps on


## ---------------------- APPLICATION LAUNCHING ---------------------- ##
# Start a terminal
bindsym $mod+Return exec --no-startup-id alacritty --config-file ~/.config/alacritty/alacritty.toml
# Start lightweight terminal
bindsym $mod+ctrl+Return exec st

# Screenshot
bindsym Print exec --no-startup-id flameshot gui
bindsym $mod+Print --release exec --no-startup-id flameshot screen

# OTD tablet button keybinds:
bindsym ctrl+Mod1+Shift+Insert workspace $:::ws100; exec --no-startup-id gimp
bindsym ctrl+Mod1+Shift+Delete exec --no-startup-id ~/.config/scripts/toggle_display_wacom.sh

# Master volume controls
set $i3_volume-control ~/.config/i3/scripts/volume-control.sh
#set $i3_volume-player ~/.config/i3/scripts/volume-player.sh
bindsym $mod+Prior exec --no-startup-id $i3_volume-control pactl_volume_up
bindsym $mod+Next exec --no-startup-id $i3_volume-control pactl_volume_down
bindsym $mod+Home exec --no-startup-id $i3_volume-control pactl_volume_full
bindsym $mod+Insert exec --no-startup-id $i3_volume-control pactl_volume_7
bindsym $mod+Delete exec --no-startup-id $i3_volume-control pactl_volume_3
bindsym $mod+End exec --no-startup-id $i3_volume-control pactl_volume_mute
# Playerctl controls
bindsym ctrl+Mod1+Prior exec --no-startup-id $i3_volume-control playerctl_volume_up
bindsym ctrl+Mod1+Next exec --no-startup-id $i3_volume-control playerctl_volume_down
bindsym ctrl+Mod1+Home exec --no-startup-id $i3_volume-control playerctl_volume_full
bindsym ctrl+Mod1+Insert exec --no-startup-id $i3_volume-control playerctl_volume_7
bindsym ctrl+Mod1+Delete exec --no-startup-id $i3_volume-control playerctl_volume_3
bindsym ctrl+Mod1+End exec --no-startup-id $i3_volume-control playerctl_volume_mute
bindsym ctrl+Mod1+Up exec --no-startup-id playerctl play-pause
bindsym ctrl+Mod1+Down exec --no-startup-id playerctl stop
bindsym ctrl+Mod1+Left exec --no-startup-id playerctl previous
bindsym ctrl+Mod1+Right exec --no-startup-id playerctl next

# Rofi Power menu
bindsym $mod+bar exec --no-startup-id ~/.config/rofi/powermenu/type-1/powermenu.sh
bindsym $mod+Shift+Escape exec --no-startup-id ~/.config/rofi/powermenu/type-1/powermenu.sh

# Rofi recently modified files
bindsym $mod+d exec --no-startup-id "fd -t f . --exec-batch ls -t . ~ | rofi -config ~/.config/rofi/launchers/type-1/style-05.rasi -dmenu -i -p recent_home | xargs -I {} ~/.config/rofi/file_actions.sh {}"

# Rofi run modi command:
bindsym $mod+Shift+Tab exec --no-startup-id "rofi -config ~/.config/rofi/launchers/type-1/style-5.rasi -show run"
# Rofi app modi:
bindsym $mod+Tab exec --no-startup-id "rofi -config ~/.config/rofi/launchers/type-1/style-5.rasi -show drun"
# Rofi window modi:
bindsym Mod1+Tab exec --no-startup-id "rofi -config ~/.config/rofi/launchers/type-1/style-005.rasi -show window"

# Rofi Clipboard manager:
bindsym $mod+c exec --no-startup-id "rofi -config ~/.config/rofi/launchers/type-1/style-05.rasi -modi 'clipboard:greenclip print' -show clipboard -run-command '{cmd}'"
# Rofi-calc Calculator:
bindsym $mod+m exec --no-startup-id "rofi -config ~/.config/rofi/launchers/type-1/style-5.rasi -show calc"

# Desktop applications:
bindsym $mod+Mod1+f exec --no-startup-id firefox
bindsym $mod+Mod1+n exec --no-startup-id ~/.config/scripts/freshrss-webapp.sh
bindsym $mod+Mod1+d exec --no-startup-id notify-send -t 600 "Launching Discord" && vesktop
bindsym $mod+Mod1+y exec --no-startup-id notify-send -t 600 "Launching Youtube Music" && youtube-music
bindsym $mod+Mod1+b exec --no-startup-id thunar
bindsym $mod+Mod1+o exec --no-startup-id notify-send -t 600 "Launching OBS Studio" && obs
bindsym $mod+Mod1+t exec --no-startup-id subl
bindsym $mod+Mod1+g exec --no-startup-id notify-send -t 600 "Launching Gimp" && gimp


## ---------------------- GENERAL SETTINGS ---------------------- ##
set $mod Mod4
floating_modifier $mod
workspace_auto_back_and_forth yes
# SET YOUR MONITOR:
#set $monitor1 DP-2
#set $monitor2 DP-4
# Removes border resize + Titlebar grab with Mouse1 (optional):
#bindsym --border button1 nop

# SET YOUR XRANDR COMMAND (optional):
#bindsym $mod+Shift+ctrl+r exec --no-startup-id xrandr --output $monitor1 --primary --mode 1920x1080 --rate 144.00 --pos 0x420 --output $monitor2 --mode 1920x1080 --rate 144.00 --pos 1920x0 --rotate left && sleep 2 && notify-send -t 2000 "Resolution reset"

# split in horizontal orientation
bindsym $mod+g exec --no-startup-id i3-msg split h && notify-send -t 800 "Horizontal ← →"
# split in vertical orientation
bindsym $mod+v exec --no-startup-id i3-msg split v && notify-send -t 800 "Vertical ↑ ↓"
# enter fullscreen mode for the focused container
bindsym $mod+f fullscreen toggle
# Make container stick to screen (floating only)
bindsym $mod+t exec --no-startup-id ~/.config/i3/scripts/toggle-sticky.sh
# change container layout (stacked, tabbed, toggle split)
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split
bindsym --whole-window $mod+ctrl+button5 layout stacking
bindsym --whole-window $mod+ctrl+button4 layout tabbed
bindsym --whole-window $mod+ctrl+button3 layout toggle split

bindsym $mod+Shift+q kill
bindsym --whole-window $mod+Shift+button2 kill

# Change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

bindsym $mod+Shift+space floating toggle; [tiling con_id=__focused__] border $configborderstyle; [floating con_id=__focused__] border normal
bindsym --whole-window $mod+ctrl+button2 floating toggle; [tiling con_id=__focused__] border $configborderstyle; [floating con_id=__focused__] border normal

# Move floating window to center
bindsym $mod+Shift+Home move position center

# Change size of current floating container
bindsym $mod+Shift+End exec --no-startup-id ~/.config/i3/scripts/cycle-window-size.sh
bindsym --whole-window $mod+ctrl+button1 exec --no-startup-id ~/.config/i3/scripts/cycle-window-size.sh

# Focus the parent container
bindsym $mod+a focus parent
# Focus the child container
bindsym $mod+q focus child


## ---------------------- AUTOSTART ---------------------- ##
exec_always --no-startup-id sleep 1; feh --bg-fill $desktopwallpaper

# XDG autostart .desktop files in /etc/xdg/autostart & ~/.config/autostart 
exec --no-startup-id dex-autostart --autostart --environment i3

# OpenTabletDriver daemon
exec --no-startup-id otd-daemon
# Greenclip daemon
set $greenclip /usr/local/bin/greenclip
exec --no-startup-id $greenclip daemon
# Picom daemon
exec --no-startup-id picom --daemon --config ~/.config/picom/picom.conf

# Mpd
exec --no-startup-id mpd

# Resolution for monitor 1 & 2
exec --no-startup-id xset s 3600 0
# SET YOUR XRANDR COMMAND:
#exec --no-startup-id xrandr --output $monitor1 --primary --mode 1920x1080 --rate 144.00 --pos 0x420 --output $monitor2 --mode 1920x1080 --rate 144.00 --pos 1920x0 --rotate left


## ---------------------- SCRATCHPADS ---------------------- ##
set $scratchpadwindowtitle1 alacritty_term-S1
set $scratchpadwindowtitle2 pulsemixer_term-S2
set $scratchpadwindowtitle3 yazi_term-S3
set $scratchpadwindowtitle4 btop_term-S4

set $scratchpadwindowcontainer1 ~/.config/i3/scripts/exec-fastfetch.sh
set $scratchpadwindowcontainer2 pulsemixer
set $scratchpadwindowcontainer3 yazi
set $scratchpadwindowcontainer4 btop

# Make the currently focused window a scratchpad
bindsym $mod+Shift+minus exec --no-startup-id i3-msg "move scratchpad" && notify-send -t 2000 "Sending to scratchpad workspace..."

# Show "other" scratchpads that are not set to launch with i3 on startup
bindsym $mod+minus [title="^(?!$scratchpadwindowtitle1|$scratchpadwindowtitle2|$scratchpadwindowtitle3|$scratchpadwindowtitle4|$scratchpadwindowtitle5).*"] scratchpad show; move position center; [tiling con_id=__focused__] border $configborderstyle; [floating con_id=__focused__] border normal
# Swap with previous bindsym to retain cycling through window functionality:
#bindsym $mod+minus scratchpad show; move position center

# Window keybinds
bindsym $mod+Mod1+1 [title="^($scratchpadwindowtitle1)$"] scratchpad show, move position center, sticky enable

bindsym $mod+Mod1+2 [title="^($scratchpadwindowtitle2)$"] scratchpad show, move position center, sticky enable

bindsym $mod+Mod1+3 [title="^($scratchpadwindowtitle3)$"] scratchpad show, move position center, sticky enable

bindsym ctrl+Shift+Escape [title="^($scratchpadwindowtitle4)$"] scratchpad show, move position center, sticky enable
bindsym $mod+Mod1+4 [title="^($scratchpadwindowtitle4)$"] scratchpad show, move position center, sticky enable

# Scratchpad 1 - Terminal
exec_always --no-startup-id pgrep -f "^(alacritty -t $scratchpadwindowtitle1)" || alacritty -t $scratchpadwindowtitle1 -e $scratchpadwindowcontainer1
# Scratchpad 2 - Pulsemixer
exec_always --no-startup-id pgrep -f "^(alacritty -t $scratchpadwindowtitle2)" || alacritty -t $scratchpadwindowtitle2 -e $scratchpadwindowcontainer2
# Scratchpad 3 - Yazi
exec_always --no-startup-id pgrep -f "^(alacritty -t $scratchpadwindowtitle3)" || alacritty -t $scratchpadwindowtitle3 -e $scratchpadwindowcontainer3
# Scratchpad 4 - Btop
exec_always --no-startup-id pgrep -f "^(alacritty -t $scratchpadwindowtitle4)" || alacritty -t $scratchpadwindowtitle4 -e $scratchpadwindowcontainer4


## ---------------------- BAR SETTINGS ---------------------- ##
# Removed stripping of WS to retain compatability with scripts.
# Monitor 1 - i3status-rust
bar {
#    USE 'monitor1' VARIABLE, RECOMMENDED IF USING MULTIPLE MONITORS:
#    output $monitor1
    font pango:CaskaydiaCove Nerd Font 16
    position top
    padding -2px 0 -2px 0
    tray_output none
    #strip_workspace_numbers yes - WS 1 - 10
    status_command i3status-rs ~/.config/i3status-rust/config1.toml

    colors {
        background #191f2a
#                          outline fill    text
    	urgent_workspace   #87ceeb #87ceeb #104b63
        focused_workspace  #0377ce #0377ce #ffffff
#       inactive but active:
        active_workspace   #313f4e #313f4e #999999
        inactive_workspace #191f2a #191f2a #777777
    }
}

##### OPTIONAL:
## Monitor 2 - i3status-rust
#bar {
#    output $monitor2
#    font pango:CaskaydiaCove Nerd Font 12.9
#    position top
#    padding -2px 0 -2px 0
#    tray_output $monitor2
#    tray_padding 2
#    #strip_workspace_numbers yes - WS: 11 - 20
#    status_command i3status-rs ~/.config/i3status-rust/config2.toml
#
#    colors {
#        background #191f2a
##                          outline fill    text
#    	urgent_workspace   #87ceeb #87ceeb #104b63
#        focused_workspace  #0377ce #0377ce #ffffff
##       inactive but active:
#        active_workspace   #313f4e #313f4e #999999
#        inactive_workspace #191f2a #191f2a #777777
#    }
#}


## ---------------------- MONITOR WORKSPACE SETTINGS ---------------------- ##
# Workspace order
# Monitor 1:
set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4"
set $ws5 "5"
set $ws6 "6"
set $ws7 "7"
set $ws8 "8"
set $ws9 "9"
set $ws10 "10"
set $ws100 "100"
# Monitor 2:
set $ws11 "11"
set $ws12 "12"
set $ws13 "13"
set $ws14 "14"
set $ws15 "15"
set $ws16 "16"
set $ws17 "17"
set $ws18 "18"
set $ws19 "19"
set $ws20 "20"

# SET YOUR WORKSPACE OUTPUTS
# Workspace outputs
#workspace $ws1 output $monitor1
#workspace $ws2 output $monitor1
#workspace $ws3 output $monitor1
#workspace $ws4 output $monitor1
#workspace $ws5 output $monitor1
#workspace $ws6 output $monitor1
#workspace $ws7 output $monitor1
#workspace $ws8 output $monitor1
#workspace $ws9 output $monitor1
#workspace $ws10 output $monitor1
#workspace $ws100 output $monitor1

#workspace $ws11 output $monitor2
#workspace $ws12 output $monitor2
#workspace $ws13 output $monitor2
#workspace $ws14 output $monitor2
#workspace $ws15 output $monitor2
#workspace $ws16 output $monitor2
#workspace $ws17 output $monitor2
#workspace $ws18 output $monitor2
#workspace $ws19 output $monitor2
#workspace $ws20 output $monitor2


## ---------------------- WINDOW MANIPULATION ---------------------- ##
# Change window focus (Vim Keys)
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

# Change window focus (Arrow Keys)
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right


# Resize without entering resize mode ("2px or 2 ppt"):
set $i3_resize ~/.config/i3/scripts/i3-resize.sh
bindsym $mod+ctrl+h exec --no-startup-id $i3_resize left
bindsym $mod+ctrl+l exec --no-startup-id $i3_resize right
bindsym $mod+ctrl+k exec --no-startup-id $i3_resize up
bindsym $mod+ctrl+j exec --no-startup-id $i3_resize down
bindsym $mod+ctrl+Left exec --no-startup-id $i3_resize left
bindsym $mod+ctrl+Right exec --no-startup-id $i3_resize right
bindsym $mod+ctrl+Up exec --no-startup-id $i3_resize up
bindsym $mod+ctrl+Down exec --no-startup-id $i3_resize down


# Go to workspace
bindsym $mod+o exec --no-startup-id i3-msg workspace number $(~/.config/i3/scripts/new-workspace-sample.sh), workspace number $_
# REPLACE "DP-2" AND "DP-4" WITH YOUR MONITORS:
#bindsym $mod+x focus output DP-4 DP-2
bindsym $mod+p workspace prev
bindsym $mod+n workspace next
bindsym $mod+1 workspace $ws1
bindsym $mod+2 workspace $ws2
bindsym $mod+3 workspace $ws3
bindsym $mod+4 workspace $ws4
bindsym $mod+5 workspace $ws5
bindsym $mod+6 workspace $ws6
bindsym $mod+7 workspace $ws7
bindsym $mod+8 workspace $ws8
bindsym $mod+9 workspace $ws9
bindsym $mod+0 workspace $ws10
bindsym $mod+F1 workspace $ws11
bindsym $mod+F2 workspace $ws12
bindsym $mod+F3 workspace $ws13
bindsym $mod+F4 workspace $ws14

# Move focused container to workspace and go to workspace
bindsym $mod+Shift+o exec --no-startup-id i3-msg move container to workspace $(~/.config/i3/scripts/new-workspace-sample.sh) && i3-msg workspace number $_
# REPLACE "DP-2" AND "DP-4" WITH YOUR MONITORS:
#bindsym $mod+Shift+x move container to output DP-4 DP-2, focus output DP-4 DP-2
bindsym $mod+Shift+p move container to workspace prev, workspace prev
bindsym $mod+Shift+n move container to workspace next, workspace next
bindsym $mod+Shift+1 move container to workspace $ws1, workspace $ws1
bindsym $mod+Shift+2 move container to workspace $ws2, workspace $ws2
bindsym $mod+Shift+3 move container to workspace $ws3, workspace $ws3
bindsym $mod+Shift+4 move container to workspace $ws4, workspace $ws4
bindsym $mod+Shift+5 move container to workspace $ws5, workspace $ws5
bindsym $mod+Shift+6 move container to workspace $ws6, workspace $ws6
bindsym $mod+Shift+7 move container to workspace $ws7, workspace $ws7
bindsym $mod+Shift+8 move container to workspace $ws8, workspace $ws8
bindsym $mod+Shift+9 move container to workspace $ws9, workspace $ws9
bindsym $mod+Shift+0 move container to workspace $ws10, workspace $ws10
bindsym $mod+Shift+F1 move container to workspace $ws11, workspace $ws11
bindsym $mod+Shift+F2 move container to workspace $ws12, workspace $ws12
bindsym $mod+Shift+F3 move container to workspace $ws13, workspace $ws13
bindsym $mod+Shift+F4 move container to workspace $ws14, workspace $ws14

# Move focused container to workspace
bindsym $mod+ctrl+o exec --no-startup-id i3-msg move container to workspace $(~/.config/i3/scripts/new-workspace.sh)
# REPLACE "DP-2" AND "DP-4" WITH YOUR MONITORS:
#bindsym $mod+ctrl+x move container to output DP-4 DP-2
bindsym $mod+ctrl+p move container to workspace prev
bindsym $mod+ctrl+n move container to workspace next
bindsym $mod+ctrl+1 move container to workspace $ws1
bindsym $mod+ctrl+2 move container to workspace $ws2
bindsym $mod+ctrl+3 move container to workspace $ws3
bindsym $mod+ctrl+4 move container to workspace $ws4
bindsym $mod+ctrl+5 move container to workspace $ws5
bindsym $mod+ctrl+6 move container to workspace $ws6
bindsym $mod+ctrl+7 move container to workspace $ws7
bindsym $mod+ctrl+8 move container to workspace $ws8
bindsym $mod+ctrl+9 move container to workspace $ws9
bindsym $mod+ctrl+0 move container to workspace $ws10
bindsym $mod+ctrl+F1 move container to workspace $ws11
bindsym $mod+ctrl+F2 move container to workspace $ws12
bindsym $mod+ctrl+F3 move container to workspace $ws13
bindsym $mod+ctrl+F4 move container to workspace $ws14

# Move window (Vim Keys)
bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right
# Move window 1 px (Vim Keys)
bindsym $mod+Mod1+Shift+h move left 1 px
bindsym $mod+Mod1+Shift+j move down 1 px
bindsym $mod+Mod1+Shift+k move up 1 px
bindsym $mod+Mod1+Shift+l move right 1 px
# Move window 200 px (Vim Keys)
bindsym $mod+ctrl+Shift+h move left 200 px
bindsym $mod+ctrl+Shift+j move down 200 px
bindsym $mod+ctrl+Shift+k move up 200 px
bindsym $mod+ctrl+Shift+l move right 200 px
# Move window 600 px (Vim Keys)
bindsym $mod+Mod1+ctrl+Shift+h move left 600 px
bindsym $mod+Mod1+ctrl+Shift+j move down 600 px
bindsym $mod+Mod1+ctrl+Shift+k move up 600 px
bindsym $mod+Mod1+ctrl+Shift+l move right 600 px

# Move window (Arrow Keys)
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right
# Move window 1 px (Arrow Keys)
bindsym $mod+Mod1+Shift+Up move up 1 px
bindsym $mod+Mod1+Shift+Down move down 1 px
bindsym $mod+Mod1+Shift+Left move left 1 px
bindsym $mod+Mod1+Shift+Right move right 1 px
# Move window 200 px (Arrow Keys)
bindsym $mod+ctrl+Shift+Up move up 200 px
bindsym $mod+ctrl+Shift+Down move down 200 px
bindsym $mod+ctrl+Shift+Left move left 200 px
bindsym $mod+ctrl+Shift+Right move right 200 px
# Move window 600 px (Arrow Keys)
bindsym $mod+Mod1+ctrl+Shift+Up move up 600 px
bindsym $mod+Mod1+ctrl+Shift+Down move down 600 px
bindsym $mod+Mod1+ctrl+Shift+Left move left 600 px
bindsym $mod+Mod1+ctrl+Shift+Right move right 600 px
